{% extends 'base.html' %}
{% block content %}
    {% load static %}
    <!-- Profile template -->
    <div class="container-fluid">

        <!-- Page Heading -->
        <h1 class="h1 mb-0 text-gray-800">Notes API</h1>
        <p class="mb-4">Notes support
            <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">
                REST
            </a>
            API that returns
            <a href="https://www.json.org/json-en.html" target="_blank">
                JSON-encoded
            </a>
            responses, and uses standard HTTP response codes, authentication, and verbs.
        </p>

        <!-- API Description and Examples Card -->
        <div class="row">
            <!-- Left side -->
            <div class="col-lg-6">
                <!-- API Description Card -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Description</h6>
                    </div>
                    <div class="card-body p-4">
                        <p>You can use Notes API to retrieve list of Public and Private notes or User profile info.</p>
                        <div class="text-center">
                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4" style="width: 25rem;"
                                 src="{% static 'img/undraw_Artificial_intelligence_re_enpp.svg' %}" alt="...">
                        </div>
                        <p>
                            Public notes can be accessed without any authentication, just like the main page. <br>
                            Private notes and user info are locked to a certain account and require both registration
                            and
                            authentication.
                        </p>
                        <p>They can be accessed via three authentication methods:</p>
                        <ul>
                            <li>Basic Authentication</li>
                            <li>Session Authentication</li>
                            <li>Token Authentication</li>
                        </ul>
                        <hr>
                        <p>API built using Django REST framework. More information can be accessed
                            <a href="https://www.django-rest-framework.org/" target="_blank">
                                here
                            </a>
                        </p>
                        <div class="text-center">
                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4" style="width: 25rem;"
                                 src="{% static 'img/undraw_programmer_imem.svg' %}" alt="...">
                        </div>
                        <p>
                            HTTP Basic Authentication Scheme is
                            signed against a user's username and password. <br>
                            Session Authentication uses Django's default session backend for authentication <br>
                            Token Authentication scheme uses a simple token-based HTTP Authentication scheme.
                        </p>
                        <p>
                            Token can be generated at
                            <a href="/profile">
                                profile
                            </a>
                            page. There can be only one token per user.
                        </p>
                        <hr>
                        <p>Notes JSON consists of the following information:</p>
                        <ul>
                            <li>id</li>
                            <li>user - Note Author</li>
                            <li>name - Note name/title</li>
                            <li>date_created</li>
                            <li>date_edited</li>
                            <li>likes</li>
                            <li>body - Note HTML body</li>
                        </ul>
                        <div class="text-center">
                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4" style="width: 25rem;"
                                 src="{% static 'img/undraw_online_test_gba7.svg' %}" alt="...">
                        </div>
                        <p>Profile information consists of:</p>
                        <ul>
                            <li>username</li>
                            <li>first_name</li>
                            <li>email</li>
                            <li>date_joined - User registration date</li>
                            <li>is_superuser - Whether the User is has permission to use admin panel</li>
                            <li>last_login</li>
                            <li>time_data - User activity data for the last 6 month</li>
                            <li>total_notes</li>
                            <li>public_notes</li>
                        </ul>
                    </div>
                </div>

                <!-- HTTP Codes Table Card -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">HTTP Code Status Summary</h6>
                    </div>
                    <div class="card-body p-4">

                        <div class="table-responsive">
                            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>200</td>
                                    <td>OK</td>
                                    <td>Everything worked as expected</td>
                                </tr>
                                <tr>
                                    <td>400</td>
                                    <td>Bad Request</td>
                                    <td>The request was unacceptable, often due to missing a required parameter</td>
                                </tr>
                                <tr>
                                    <td>401</td>
                                    <td>Unauthorized</td>
                                    <td>No valid API key provided</td>
                                </tr>
                                <tr>
                                    <td>402</td>
                                    <td>Request Failed</td>
                                    <td>The parameters were valid but the request failed</td>
                                </tr>
                                <tr>
                                    <td>403</td>
                                    <td>Forbidden</td>
                                    <td>The API key doesn't have permissions to perform the request</td>
                                </tr>
                                <tr>
                                    <td>404</td>
                                    <td>Not Found</td>
                                    <td>The requested resource doesn't exist</td>
                                </tr>
                                <tr>
                                    <td>429</td>
                                    <td>Too Many Requests</td>
                                    <td>Too many requests hit the API too quickly
                                    </td>
                                </tr>
                                <tr>
                                    <td>500, 502, 503, 504</td>
                                    <td>Server Errors</td>
                                    <td>Something went wrong on Notes' end</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Right Side -->
            <div class="col-lg-6">
                <!-- Public notes API Card with an example-->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Public Notes Example</h6>
                    </div>
                    <div class="card-body">
                        <p>Public notes can be accessed without any authentication: <br>
                            <code> GET <a href="/api/public">https://notes.zoloto.cx.ua/api/public</a></code>
                        </p>
                        <hr>
                        <p>Note objects are sorted by date:</p>
                        <pre id="public-example">
                            <!-- Example JSON is generated with JavaScript -->
                        </pre>
                    </div>
                </div>
                <!-- Private notes API Card with an example-->
                <div class="card shadow mb-4 mw-100">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Private Notes Example</h6>
                    </div>
                    <div class="card-body">
                        <p>
                            Private notes require authorization or active logged session
                        </p>
                        <p>Authorization can be done using token: <br>
                            <code>
                                curl -X GET https://notes.zoloto.cx.ua/api/private -H 'Authorization: Token {token}'
                            </code>
                        </p>
                        <p>
                            Using username and password: <br>
                            <code>curl --user {name}:{password} https://notes.zoloto.cx.ua/api/private</code>
                        </p>
                        <p>Or can be accessed in an opened
                            <a href="/api/private">logged session</a></p>
                        <hr>
                        <p>Note objects are sorted by date:</p>
                        <pre id="private-example">
                            <!-- Example JSON is generated with JavaScript -->
                        </pre>
                    </div>
                </div>

                <!-- Profile API Card with an example-->
                <div class="card shadow mb-4 mw-100">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Profile Information Example</h6>
                    </div>
                    <div class="card-body">
                        <p>
                            Profile information requires authorization identical to the private Notes
                        </p>
                        <p>Authorization can be done using token: <br>
                            <code>
                                curl -X GET https://notes.zoloto.cx.ua/api/profile -H 'Authorization: Token {token}'
                            </code>
                        </p>
                        <p>
                            Using username and password: <br>
                            <code>curl --user {name}:{password} https://notes.zoloto.cx.ua/api/profile</code>
                        </p>
                        <p>Or can be accessed in an opened
                            <a href="/api/profile">logged session</a></p>
                        <hr>
                        <pre id="profile-example">
                            <!-- Example JSON is generated with JavaScript -->
                        </pre>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- JSON examples using stringify JSON method -->
    <script>
        let publicData = [
            {
                "id": 1,
                "user": "username_1",
                "name": "note 1 title",
                "date_created": "2021-10-09T22:34:23.910752Z",
                "date_edited": "2021-10-14T04:52:47.542000Z",
                "likes": 321,
                "body": "<p>Public Note 1 body in html format</p>"
            }, {
                "id": 2,
                "user": "username_3",
                "name": "note 2 title",
                "date_created": "2021-10-09T22:34:23.910752Z",
                "date_edited": "2021-09-20T04:52:47.542000Z",
                "likes": 123,
                "body": "<p>Public Note 2 body in html format</p>"
            }
        ]
        let privateData = [
            {
                "id": 1,
                "user": "{{user.username}}",
                "name": "note 1 title",
                "date_created": "2021-09-09T22:34:23.910752Z",
                "date_edited": "2021-09-14T04:52:47.542000Z",
                "likes": 5,
                "body": "<p>Your 1'st note body in html format</p>"
            }, {
                "id": 2,
                "user": "{{user.username}}",
                "name": "note 2 title",
                "date_created": "2021-09-09T22:34:23.910752Z",
                "date_edited": "2021-09-13T04:52:47.542000Z",
                "likes": 4,
                "body": "<p>Your 2'nd note body in html format</p>"
            }
        ]
        let profileData = {
            "username": "{{ user.username }}",
            "first_name": "{{ user.first_name }}",
            "email": "{{ user.email }}",
            "date_joined": "{{user.date_joined}}",
            "is_superuser": false,
            "last_login": "{{user.last_login}}",
            "time_data": {
                "October": 123,
                "September": 321,
                "August": 12,
                "July": 21,
                "June": 1,
                "May": 1
            },
            "total_notes": 993,
            "public_notes": 7
        }
        let jsonPublicData = JSON.stringify(publicData, null, 4);
        let jsonPrivateData = JSON.stringify(privateData, null, 4);
        let jsonProfileData = JSON.stringify(profileData, null, 4);
        $("#public-example").text(jsonPublicData);
        $("#private-example").text(jsonPrivateData);
        $("#profile-example").text(jsonProfileData);
    </script>
{% endblock %}